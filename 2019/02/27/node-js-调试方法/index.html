<!DOCTYPE html><html><head><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=author content=jianjian><title>node.js 调试方法 | imjianjian</title><link rel=icon href=/favicon.ico><link rel=stylesheet href=/css/style.css><script src=/js/script.js></script><script src=/js/tocbot.min.js></script></head><body><div class=wrapper><header><nav class=navbar><div class=container><div class="navbar-header header-logo"><a href="/">imjianjian&#39;s Blog</a></div><div class="menu navbar-right"><a class=menu-item href=/archives>Posts</a> <a class=menu-item href=/tags>Tags</a> <input id=switch_default type=checkbox class=switch_default><label for=switch_default class=toggleBtn></label></div></div></nav><nav class=navbar-mobile id=nav-mobile><div class=container><div class=navbar-header><div><a href="/">imjianjian&#39;s Blog</a><a id=mobile-toggle-theme>·&nbsp;Light</a></div><div class=menu-toggle onclick=mobileBtn()>&#9776; Menu</div></div><div class=menu id=mobile-menu><a class=menu-item href=/archives>Posts</a> <a class=menu-item href=/tags>Tags</a></div></div></nav></header><script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script><div class=main><div class=container><div class=post-toc><div class=tocbot-list></div><div class=tocbot-list-menu><a class=tocbot-toc-expand onclick=expand_toc()>Expand all</a> <a onclick=go_top()>Back to top</a> <a onclick=go_bottom()>Go to bottom</a></div></div><script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script><article class=post-wrap><header class=post-header><h1 class=post-title>node.js 调试方法</h1><div class=post-meta>Author: <a itemprop=author rel=author href="/">jianjian</a> <span class=post-time>Date: <a href=#>February 27, 2019&nbsp;&nbsp;10:46:08</a></span></div></header><div class=post-content><h1 id=使用chome-devtool调试><a href=#使用chome-devtool调试 class=headerlink title=使用chome-devtool调试></a>使用chome-devtool调试</h1><h2 id=调试node服务><a href=#调试node服务 class=headerlink title=调试node服务></a>调试node服务</h2><h3 id=准备步骤><a href=#准备步骤 class=headerlink title=准备步骤></a>准备步骤</h3><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line>mkdir nodeDebug</span><br><span class=line>cd nodeDebug</span><br><span class=line>npm init</span><br><span class=line>npm i express</span><br><span class=line>touch server.js</span><br></pre></td></tr></table></figure><blockquote><p>编辑server.js文件，写入以下内容</p></blockquote><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line>const app = require(&apos;express&apos;)();</span><br><span class=line></span><br><span class=line>app.get(&apos;/&apos;,(req,res)=&gt;&#123;</span><br><span class=line>    res.send(&apos;hello&apos;);</span><br><span class=line>&#125;)</span><br><span class=line></span><br><span class=line>app.listen(3000);</span><br></pre></td></tr></table></figure><h3 id=启动调试><a href=#启动调试 class=headerlink title=启动调试></a>启动调试</h3><blockquote><p>node –inspect server.js //不指定调试端口，默认9229<br>node –inspect=9999 server.js //指定调试端口</p></blockquote><h3 id=访问服务><a href=#访问服务 class=headerlink title=访问服务></a>访问服务</h3><p>在浏览器中打开localhost:3000,页面返回helo，说明服务启动成功。<br>打开控制台会发现有node标志，点击即可进入node代码调试。</p><p><img src=/img/nodeDebug/debug1.png></p><p>此时添加断点，再次访问localhost:3000,即可进入该服务进行断点调试。</p><p><img src=/img/nodeDebug/debug2.png></p><h2 id=调试非服务代码><a href=#调试非服务代码 class=headerlink title=调试非服务代码></a>调试非服务代码</h2><h3 id=准备步骤-1><a href=#准备步骤-1 class=headerlink title=准备步骤></a>准备步骤</h3><blockquote><p>index.js</p></blockquote><figure class="highlight plain"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line>let a = 1;</span><br><span class=line>let b = 2;</span><br><span class=line></span><br><span class=line>function add(a,b)&#123;</span><br><span class=line>    return a+b;</span><br><span class=line>&#125;</span><br><span class=line></span><br><span class=line>add(a,b);</span><br></pre></td></tr></table></figure><h3 id=启动调试-1><a href=#启动调试-1 class=headerlink title=启动调试></a>启动调试</h3><blockquote><p>node –inspect-brk server.js //不指定调试端口，默认9229<br>node –inspect-brk=9999 server.js //指定调试端口</p></blockquote><p>注意命令的变化，此时改用<b>–inspect-brk</b>命令打开调试。如果直接使用–inspect命令，由于此时代码中没有断点，代码运行结束即调试结束，这个过程是很快的，没有办法像服务那样通过再次访问来切入调试。<br><b>–inspect-brk</b>命令会默认在第一行加入断点，等待继续调试。</p><h3 id=打开chrome-devtool><a href=#打开chrome-devtool class=headerlink title=打开chrome-devtool></a>打开chrome-devtool</h3><blockquote><p>在浏览器输入 chrome://inspect 进入谷歌调试</p></blockquote><p><img src=/img/nodeDebug/debug3.png></p><blockquote><p>点击configure</p></blockquote><p><img src=/img/nodeDebug/debug4.png></p><p>添加调试的ip和端口,然后点击<b>inspect</b>进入调试。</p><p><img src=/img/nodeDebug/debug5.png></p><p>此时的断点在第一行等待。</p><p><img src=/img/nodeDebug/debug6.png></p><h1 id=使用vscode调试><a href=#使用vscode调试 class=headerlink title=使用vscode调试></a>使用vscode调试</h1><blockquote><p>添加node debug插件到编辑器</p></blockquote><p><img src=/img/nodeDebug/debug7.png></p><blockquote><p>进入vscode调试面板</p></blockquote><p><img src=/img/nodeDebug/debug8.png></p><blockquote><p>添加node调试配置</p></blockquote><p><img src=/img/nodeDebug/debug9.png></p><blockquote><p>添加断点，点击调试</p></blockquote><p><img src=/img/nodeDebug/debug10.png></p><h1 id=使用命令行调试><a href=#使用命令行调试 class=headerlink title=使用命令行调试></a>使用命令行调试</h1><p>官方提供了详细的说明，不赘述</p><p><a href=http://nodejs.cn/api/debugger.html target=_blank rel=noopener>文档链接</a></p></div><section class=post-copyright><p class=copyright-item><span>Author:</span> <span>jianjian</span></p><p class=copyright-item><span>Permalink:</span> <span><a href="http://yoursite.com/2019/02/27/node-js-%E8%B0%83%E8%AF%95%E6%96%B9%E6%B3%95/">http://yoursite.com/2019/02/27/node-js-%E8%B0%83%E8%AF%95%E6%96%B9%E6%B3%95/</a></span></p><p class=copyright-item><span>License:</span> <span>Copyright (c) 2019 <a href="http://creativecommons.org/licenses/by-nc/4.0/" target=_blank rel=noopener>CC-BY-NC-4.0</a> LICENSE</span></p><p class=copyright-item><span>Slogan:</span> <span>Do you believe in <strong>DESTINY<strong>?</strong></strong></span></p></section><section class=post-tags><div><span>Tag(s):</span> <span class=tag><a href="/tags/JavaScript/"># JavaScript</a> <a href="/tags/node-js/"># node.js</a></span></div><div><a href=javascript:window.history.back(); target=_blank rel=noopener>back</a> <span>·</span> <a href="/">home</a></div></section><section class=post-nav><a class=next rel=next href="/2019/02/15/eslint%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/">eslint使用教程</a></section></article></div></div><footer id=footer class=footer><div class=copyright><span>© jianjian | Powered by <a href=https://hexo.io target=_blank>Hexo</a> & <a href=https://github.com/Siricee/hexo-theme-Chic target=_blank>Chic</a></span></div></footer></div></body></html>